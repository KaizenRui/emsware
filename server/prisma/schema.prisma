datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model stockcode {
  id       Int        @id @default(autoincrement())
  emc      String     @unique
  custpn   String     @unique
  value    String?
  mpn1     String
  qty      Int?

  bomItems bomitems[] @relation("PartBOMItems")
}

model billofmaterials {
  bom_id        Int         @id @default(autoincrement())
  customer      String?
  bom_name      String
  revisionno    Int?
  revision_date DateTime?
  history       String?

  bomItems      bomitems[]
}

model bomitems {
  id          Int        @id @default(autoincrement())
  bom_id      Int        // foreign key to billofmaterials
  bom_name    String?    // optional: store BOM name for reference
  emc         String
  quantity    Int
  designators String      // PCB locations (e.g., component placement on board)
  mpn1        String      // Manufacturer Part Number 1
  pcb_side    String?     // Optional PCB side
  processdept String?     // Optional process department

  bom  billofmaterials @relation(fields: [bom_id], references: [bom_id])
  part stockcode       @relation("PartBOMItems", fields: [emc], references: [emc])

  @@index([bom_id])
  @@index([emc])
  @@unique([bom_id, emc])

}

  model User {
  id       Int    @id @default(autoincrement())
  username String @unique
  password String
  role     String @default("user")
  }